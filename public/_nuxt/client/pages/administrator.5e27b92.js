(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{444:function(t,r,n){"use strict";n.r(r);n(46);var o=n(13),l=(n(29),n(365)),c=n.n(l),d=n(370),v=n.n(d);n(388),n(391);var f={asyncData:function(e){e.req;var t=e.redirect;c.a.auth().currentUser||t("/login")},data:function(){return{loggedIn:!0,valid:!0,tittle:"",image:null,description:"",information:"",category:null,src:null,price:null,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length>=5||"Name greater than 5 characters"}],items:["Item 1","Item 2","Item 3","Item 4"],checkbox:!1,savedProducts:[],Product:null,currentProduct:null,orders:[],customerName:"",orderPrice:null,orderDescription:null,orderState:null,orderDate:"",OrderStateType:["fulfilled","ongoing","canceled"]}},methods:{addProduct:function(){var e=this;if(this.image){var t=this.image,r=this.$fireStorage.ref("products/"+Math.random()+"_"+t.name).put(t);r.on("state_changed",(function(e){}),(function(e){alert(e)}),(function(){r.snapshot.ref.getDownloadURL().then((function(t){e.src=t,e.Product={price:1*e.price,description:e.description,information:e.information,category:e.category,tittle:e.tittle,src:e.src},console.log(e.Product)})).then((function(){e.$fireStore.collection("products").add(e.Product).then((function(e){return alert(" document sent"+e.id)})).catch((function(e){return console.log(e)}))})).catch((function(e){return alert(e)}))}))}},addOrder:function(){var e={customerName:this.customerName,price:1*this.orderPrice,description:this.orderDescription,state:this.orderState,date:this.orderDate};console.log(e),this.$fireStore.collection("orders").add(e).then((function(e){return alert(" document sent"+e.id)})).catch((function(e){return console.log(e)}))},validate:function(){this.$refs.form.validate(),this.addProduct()},validateOrder:function(){this.$refs.form.validate(),this.addOrder()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},deleteItem:function(e){this.$fireStore.collection("products").doc(e.id).delete().then((function(){console.log("deleted succesfully")})).catch((function(e){return console.log(e)})),this.$fireStorage.refFromURL(e.src).delete().then((function(){console.log("image deleted")})).catch((function(e){console.log("an error occurred")}))},deleteOrder:function(e){this.$fireStore.collection("orders").doc(e.id).delete().then((function(){console.log("deleted succesfully")})).catch((function(e){return console.log(e)}))},signOut:function(){var t=this;c.a.auth().signOut().then((function(){t.$router.push("/login"),console.log(e)})).catch((function(e){console.log(e)})),c.a.auth().onAuthStateChanged((function(e){e?(console.log("signed in"),c.a.auth().currentUser.getIdToken(!0).then((function(e){return v.a.set("access_token",e)})),t.loggedIn=!0):(v.a.remove("access_token"),t.loggedIn=!1,console.log("signed out",t.loggedIn))}))}},beforeMount:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("bindProducts");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:return t.prev=8,t.next=11,e.$store.dispatch("bindOrders");case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(8),console.log(t.t1);case 16:e.savedProducts=e.$store.getters.getProduct,e.orders=e.$store.getters.getOrders;case 18:case"end":return t.stop()}}),t,null,[[0,5],[8,13]])})))()}},m=n(70),_=n(100),h=n.n(_),x=n(167),k=n(449),P=n(432),y=n(433),O=n(434),V=n(435),D=n(436),S=n(400),C=n(442),$=n(437),w=n(343),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-expansion-panels",[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Add Products")]),e._v(" "),r("v-expansion-panel-content",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-file-input",{attrs:{rules:[function(e){return!!e||"image  is required"}],label:"Product image","prepend-icon":"mdi-camera",required:""},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-chart-bubble",rules:e.nameRules,label:"Product Name",required:""},model:{value:e.tittle,callback:function(t){e.tittle=t},expression:"tittle"}}),e._v(" "),r("v-text-field",{attrs:{rules:e.nameRules,"prepend-icon":"mdi-information-outline",label:"Product Description",required:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-wallet",label:"Product price",rules:[function(e){return!!e||"image  is required"}],required:"",type:"number"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-information-variant",label:"Product full information",rules:e.nameRules,required:""},model:{value:e.information,callback:function(t){e.information=t},expression:"information"}}),e._v(" "),r("v-select",{attrs:{items:e.items,rules:[function(e){return!!e||"category  is required"}],label:"Category",required:"","prepend-icon":"mdi-format-list-bulleted-type"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._v(" "),r("v-checkbox",{attrs:{rules:[function(e){return!!e||"You must agree to continue!"}],label:"are you done?",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),e._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{color:"success",disabled:!e.valid},on:{click:e.validate}},[e._v("Validate")]),e._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v("Reset Form")]),e._v(" "),r("v-btn",{attrs:{color:"warning"},on:{click:e.resetValidation}},[e._v("Reset Validation")])],1)],1)],1)],1),e._v(" "),r("v-expansion-panels",[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Delete products")]),e._v(" "),r("v-expansion-panel-content",[r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("Product Name")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("Product Price")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("delete Product")])])]),e._v(" "),r("tbody",e._l(e.savedProducts,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.tittle))]),e._v(" "),r("td",[e._v(e._s(t.price))]),e._v(" "),r("td",[r("v-btn",{attrs:{color:"error"},on:{click:function(r){return e.deleteItem(t)}}},[e._v("Delete item")])],1)])})),0)]},proxy:!0}])})],1)],1)],1),e._v(" "),r("v-expansion-panels",[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Order manager")]),e._v(" "),r("v-expansion-panel-content",[r("v-expansion-panels",[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Add Order")]),e._v(" "),r("v-expansion-panel-content",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-chart-bubble",rules:e.nameRules,label:"customer Name",required:""},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}}),e._v(" "),r("v-text-field",{attrs:{rules:e.nameRules,"prepend-icon":"mdi-information-outline",label:"Order Description",required:""},model:{value:e.orderDescription,callback:function(t){e.orderDescription=t},expression:"orderDescription"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-wallet",label:"order price",rules:[function(e){return!!e||"price  is required"}],required:"",type:"number"},model:{value:e.orderPrice,callback:function(t){e.orderPrice=t},expression:"orderPrice"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-wallet",label:"order Date",rules:[function(e){return!!e||"date  is required"}],required:""},model:{value:e.orderDate,callback:function(t){e.orderDate=t},expression:"orderDate"}}),e._v(" "),r("v-select",{attrs:{items:e.OrderStateType,rules:[function(e){return!!e||"category  is required"}],label:"Order state",required:"","prepend-icon":"mdi-format-list-bulleted-type"},model:{value:e.orderState,callback:function(t){e.orderState=t},expression:"orderState"}}),e._v(" "),r("v-checkbox",{attrs:{rules:[function(e){return!!e||"You must agree to continue!"}],label:"are you done?",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),e._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{color:"success",disabled:!e.valid},on:{click:e.validateOrder}},[e._v("Validate")]),e._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v("Reset Form")]),e._v(" "),r("v-btn",{attrs:{color:"warning"},on:{click:e.resetValidation}},[e._v("Reset Validation")])],1)],1)],1)],1),e._v(" "),r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("customer Name")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("order full Price")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("order full description")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("order state")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("order date")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("delete")])])]),e._v(" "),r("tbody",e._l(e.orders,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.customerName))]),e._v(" "),r("td",[e._v(e._s(t.price))]),e._v(" "),r("td",[e._v(e._s(t.description))]),e._v(" "),r("td",[e._v(e._s(t.state))]),e._v(" "),r("td",[e._v(e._s(t.date))]),e._v(" "),r("td",[r("v-btn",{attrs:{color:"error"},on:{click:function(r){return e.deleteOrder(t)}}},[e._v("Delete order")])],1)])})),0)]},proxy:!0}])})],1)],1)],1),e._v(" "),e.loggedIn?r("v-btn",{attrs:{color:"error",block:""},on:{click:e.signOut}},[e._v("logout")]):e._e()],1)}),[],!1,null,null,null);r.default=component.exports;h()(component,{VBtn:x.a,VCheckbox:k.a,VExpansionPanel:P.a,VExpansionPanelContent:y.a,VExpansionPanelHeader:O.a,VExpansionPanels:V.a,VFileInput:D.a,VForm:S.a,VSelect:C.a,VSimpleTable:$.a,VTextField:w.a})}}]);